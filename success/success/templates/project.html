<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{name}}</title>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            background-color: #e8eeea;
        }
    </style>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'styles.css' %}">
    <script src="https://d3js.org/d3.v6.min.js"></script>
</head>
<body>

<div class="header">
</div>

<div class="buttons-container">
    <button title="Add new factor" onclick="showFactorPopup()"><img src="{% static 'images/factor.png' %}" style="display: inline; width: 40px; height: 40px; position: absolute; top: 15px; left: 15px;"></button>
    <button title="Add new relationship" onclick="showEdgePopup()"><img src="{% static 'images/arrow.png' %}" style="display: inline; width: 40px; height: 40px; position: absolute; top: 70px; left: 15px;"></button>
    <button title="Delete anything" onclick="delete_entity()"><img src="{% static 'images/scissors.png' %}" style="display: inline; width: 40px; height: 40px; position: absolute; top: 125px; left: 15px;"></button>
</div>

<div class="upper-container">
    <img src="{% static 'images/logo.png' %}" alt="Project Logo" class="project-logo">
    <label class="top-left-label" style="display: inline-block; position : absolute; top:17px; left:160px; font-family: 'Roboto', sans-serif;">{{name}}</label>
    <div class="sandwich-button" style="display: inline-block; position: absolute; top: 21px; right: 10px;" onclick="sandwich()">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>
</div>

<div class="right-container">
    <input type="number" class="input-field" id="StepsInput" placeholder="Steps number">
    <button class="pause-button" onclick="pause()">II</button>
    <button class="play-button" onclick="play()">▶</button>
</div>

<div class="sandwich-container" id="sandwich">
    <button class="button" onclick="save_project()">Save</button>
    <button class="button" onclick="export_project()">Export</button>
</div>

<div class="background-overlay" id="projectBackgroundOverlay"></div>
<div class="login-popup" id="factorPopup">
    <button class="close-btn" onclick="hideFactorPopup()">✖</button>
    <h2 style="margin-bottom: 0">Add factor</h2>
    <form action="{% url 'factor' username=username name=name%}" method="post" >
        {% csrf_token %}
        {{ form.as_p }}

        <label for="factorName"> </label><br>
        <input style="display: inline-block" type="text" id="factorName" name="factorName" placeholder="Factor name" required><br>

        <label for="factorValue"> </label>
        <input style="display: inline-block" type="number" step="0.01" id="factorValue" name="factorName" placeholder="Concept value" required><br>

        <label for="threshold"> </label>
        <input style="display: inline-block" type="number" step="0.01" id="threshold" name="threshold" placeholder="Threshold" required><br>

        <label id="activationLabel" style="text-align: center;">Activation function:</label>

        <input style="display: inline; width: 15px" type="radio" id="triangular" name="activationType" value="private" required>
        <label for="triangular" style="display: inline-block">Triangular</label><br>

        <input type="radio" id="gaussian" name="activationType" value="public" required style="display: inline; width: 15px">
        <label for="gaussian" style="display: inline-block">Gaussian</label><br>

        <input type="radio" id="public" name="activationType" value="trapezoidal" required style="display: inline; width: 15px">
        <label for="public" style="display: inline-block">Trapezoidal</label><br>
        <br>

        <button class="register-button" type="submit">Add</button>
    </form>
</div>

<div class="login-popup" id="edgePopup">
    <button class="close-btn" onclick="hideEdgePopup()">✖</button>
    <h2 style="margin-bottom: 0">Add relationship</h2>
    <form action="{% url 'edge' username=username name=name%}" method="post" >
        {% csrf_token %}
        {{ form.as_p }}

        <label for="edgeName"> </label><br>
        <input style="display: inline-block" type="text" id="edgeName" name="edgeName" placeholder="Relationship name" required><br>

        <label for="weightValue"> </label>
        <input style="display: inline-block" type="number" step="0.01" id="weightValue" name="factorName" placeholder="Weight" required><br>

        <label for="uncertaintyValue"> </label>
        <input style="display: inline-block" type="number" step="0.01" id="uncertaintyValue" name="factorName" placeholder="Uncertainty" required><br>

        <label id="connectionLabel" style="text-align: center;">Type of Connection:</label>

        <input style="display: inline; width: 15px" type="radio" id="support" name="activationType" value="private" required>
        <label for="triangular" style="display: inline-block">Support</label><br>

        <input type="radio" id="obstacle" name="activationType" value="obstacle" required style="display: inline; width: 15px">
        <label for="gaussian" style="display: inline-block">Obstacle</label><br>
        <br>

        <button class="register-button" type="submit">Add</button>
    </form>
</div>

<div class="background-overlay" id="backgroundOverlay"></div>
<script src="{% static 'script.js' %}"></script>
<script>

    // Now you can use dataArray in your JavaScript code
    console.log('{{ factors }}');  // Output: [1, 2, 3]
    // Parse the JSON string back into an array
    var dataArray = JSON.parse('{{ factors }}');
    console.log(dataArray);  // Output: [1, 2, 3]
</script>
<script src="{% static 'd3.js' %}"></script>
</body>
</html>